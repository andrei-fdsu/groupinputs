/**
 * GroupInputs v. 0.8.7
 * @author Pavel Kornilov <pk@ostrovok.ru> <lusever@lusever.com>
 * https://github.com/lusever/groupinputs
 * MIT Licensed
 */
!function(e){"use strict";var t=!!window.opera,n="maxlength";function a(e,t,n,a){if(/iPad|iPhone/.test(navigator.platform)){const l=document.createElement("input");l.setAttribute("type","text"),l.style.position="absolute",l.style.opacity=0,l.style.height=0,l.style.fontSize="16px",document.body.prepend(l),l.focus(),setTimeout(()=>{e.focus(),i(t,n,a),l.remove()},100)}else setTimeout(function(){e.focus(),i(t,n,a)},100)}function i(e,t,n){var a;if(void 0===t){if(t=0,n=0,"selectionStart"in e)t=e.selectionStart,n=e.selectionEnd;else if(e.createTextRange){var i=(a=document.selection.createRange()).duplicate();a.parentElement()===e&&(n=(t=-i.moveStart("character",-1e5))+a.text.length)}return{start:t,end:n}}e.setSelectionRange?e.setSelectionRange(t,n):document.selection&&document.selection.createRange&&((a=e.createTextRange()).collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select())}e.fn.groupinputs=function(){var e=this,l=[],r=0;function o(t,n){var r,o,s,c=t[0].value,u=i(t[0]).end,h=c.slice(0,u),g=c.slice(u),d=n.maxlength-g.length,p=!1;for(s=e.length-1;s>n.index;s--)d+=l[s]-e[s].value.length;if(h.length>d?(h=h.slice(0,d),o=d):o=u,c.length>n.maxlength){var f,m;if(t[0].value=(h+g).slice(0,n.maxlength),o<=n.maxlength&&(i(t[0],o,o),p=!0),(r=(h+g).slice(n.maxlength)).length)for(o-=Math.min(n.maxlength,h.length);e[++s]&&(f=l[s],r+=e[s].value,e.eq(s).val(r.slice(0,f)).change(),!(r.length<=f));)m=e[s].value.length,p||(o<f&&(p=!0,a(e.eq(s),e[s],o,o)),o-=m),r=r.slice(f);p||a(e.eq(s),e[s],o,o)}}function s(l){var s,c=l.type,u=l.data,h=l.data.elem,g=l.data.index;t&&"keypress"===c&&(c="keydown");if("keydown"===c&&39===l.keyCode&&(s=i(h[0])).start===this.value.length&&g!==e.length-1&&(a(e.eq(g+1),e[g+1],0,0),l.preventDefault()),"keydown"===c&&(8===l.keyCode||37===l.keyCode)&&(s=i(h[0])).start===s.end&&0===s.start&&0!==g){var d=e.eq(g-1),p=d.val().length;a(d,d[0],p,p),37===l.keyCode&&l.preventDefault()}if("keyup"===c||"keydown"===c){if(l.keyCode<48)return;if("keyup"===c&&u.ignoreNextKeyup)return void(u.ignoreNextKeyup=!1);if(l.metaKey)return void(u.ignoreNextKeyup=!0);(s=i(h[0])).start===s.end&&s.start===this.value.length&&g!==e.length-1&&this.value.length===u.maxlength&&a(e.eq(g+1),e[g+1],0,0)}"paste"===c&&h.attr(n,r),"propertychange"!==c&&"input"!==c||h.attr(n)!==u.maxlength&&setTimeout(function(){o(h,u),h.attr(n,u.maxlength)},0),"input"===c&&t&&o(h,u)}return e.each(function(t){var a=e.eq(t),i=+a.attr(n);r+=i,l.push(i),a.on("keydown keypress keyup input paste propertychange",{elem:a,index:t,maxlength:i},s)}),t&&e.attr(n,r),e}}(jQuery);